!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=38)}({12:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this;this.get=function(t){if(name="store."+e.name+"."+t,null!==localStorage.getItem(name))try{return JSON.parse(localStorage.getItem(name))}catch(e){return null}},this.set=function(t,o){if(void 0===o)e.remove(t);else{if("function"==typeof o)o=null;else try{o=JSON.stringify(o)}catch(e){o=null}localStorage.setItem("store."+e.name+"."+t,o)}return e},this.remove=function(t){return localStorage.removeItem("store."+e.name+"."+t),e},this.removeAll=function(){for(var t="store."+e.name+".",o=localStorage.length-1;o>=0;o--)localStorage.key(o).substring(0,t.length)===t&&localStorage.removeItem(localStorage.key(o));return e},this.toObject=function(){for(var t={},o=void 0,n=void 0,r="store."+e.name+".",a=localStorage.length-1;a>=0;a--)localStorage.key(a).substring(0,r.length)===r&&(o=localStorage.key(a).substring(r.length),void 0!==(n=e.get(o))&&(t[o]=n));return t},this.fromObject=function(t,o){for(var n in!0!==o&&e.removeAll(),t)t.hasOwnProperty(n)&&e.set(n,t[n]);return e}};t.default=function e(t,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.call(this),this.name=t,void 0!==o)for(var r in o)o.hasOwnProperty(r)&&void 0===this.get(r)&&this.set(r,o[r])}},13:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.upload_to_server=function(e,t,o){if(e){var n={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};n=Object.assign(n,t),fetch(e,n).then(function(e){return e.text()}).then(function(e){return o(e)}).catch(function(e){console.log(e)})}},t.get_by_cookie=function(e,t,o){if(e){var n={credentials:"include"};n=Object.assign(n,t),fetch(e,n).then(function(e){return e.json()}).then(function(e){return o(e)}).catch(function(e){console.log(e)})}},t.post_by_cookie=function(e,t,o){if(e){var n={method:"POST",credentials:"include",headers:{"Content-Type":"application/json; charset=UTF-8"}};n=Object.assign(n,t),fetch(e,n).then(function(e){return console.log(e),e.text()}).then(function(e){console.log(e),o(JSON.parse(e))}).catch(function(e){console.log(e)})}}},34:function(e,t,o){"use strict";var n=function(e){chrome.tabs.query({active:!0,currentWindow:!0},function(t){var o=chrome.tabs.connect(t[0].id,{name:"popup_to_content"}),n=document.getElementById("battle_input");n.focus(),n.value="",document.execCommand("paste");var r=n.value.trim();/^[A-Za-z0-9]+$/gi.test(r)&&8==r.length?o.postMessage({message:"battle_key_check",battleId:r,userId:e}):console.log("check failed")})};e.exports={init_input_for_battle:function(){var e=document.getElementById("battle_input");e||((e=document.createElement("input")).id="battle_input",e.style.width="0px",e.style.height="0px",document.body.appendChild(e))},get_battle_room_href:function(e,t){t||chrome.browserAction.onClicked.addListener(function(){n(e)})},handle_board_post:n}},35:function(e,t,o){"use strict";var n=o(13);e.exports={init_user_id:function(e){!e.get("userId")&&(0,n.get_by_cookie)("http://game.granbluefantasy.jp/user/user_id",{},function(t){var o=t.user_id;e.set("userId",o)})}}},36:function(e,t,o){"use strict";e.exports={zoom:1.5,is_left_sider_show:!0,is_right_sider_show:!1,head_address:"http://",address:"localhost:8023",black_list:[],is_scroll_style_show:!1,is_multil:!1,is_listen_board:!1,is_listen_bp:!1,is_rape:!1}},37:function(e,t,o){"use strict";var n=r(o(36));function r(e){return e&&e.__esModule?e:{default:e}}var a=new(r(o(12)).default)("options");fetch("./assets/black_list.json",{}).then(function(e){return e.json()}).then(function(e){var t=a.get("black_list"),o=[],n=!0,r=!1,i=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var l=s.value,u=l.id;if(t&&t.length>0){var f=!0,d=!1,_=void 0;try{for(var h,g=t[Symbol.iterator]();!(f=(h=g.next()).done);f=!0){var b=h.value;b.id==u&&o.push(Object.assign({},b,l))}}catch(e){d=!0,_=e}finally{try{!f&&g.return&&g.return()}finally{if(d)throw _}}}else o=e}}catch(e){r=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw i}}a.set("black_list",o)});var i=a.toObject();a.fromObject(Object.assign({},n.default,i));e.exports={local:a}},38:function(e,t,o){"use strict";var n=o(37),r=o(35),a=o(34);window.store=n.local,(0,r.init_user_id)(n.local),chrome.browserAction.setPopup({popup:n.local.get("is_multil")?"":"index.html"}),(0,a.init_input_for_battle)(),(0,a.get_battle_room_href)(n.local.get("userId"),n.local.get("is_listen_board")),chrome.runtime.onMessage.addListener(function(e,t,o){var r=e.message,i=(e.zoom,e.search,e.url),s={error:"",tasks:""};switch(r){case"get_zoom":s=Object.assign(s,{zoom:n.local.get("zoom")});break;case"get_search":s=Object.assign(s,{search:n.local.get("search")});break;case"get_sider_options":s=Object.assign(s,{left:n.local.get("is_left_sider_show"),right:n.local.get("is_right_sider_show")});break;case"get_scroll_options":s=Object.assign(s,{status:n.local.get("is_scroll_style_show")});break;case"battle_room_href":chrome.tabs.update(t.tab.id,{url:"http://game.granbluefantasy.jp"+i});break;case"get_user_id":s=Object.assign(s,{user_id:n.local.get("userId")});break;case"redo_battle_room_href_check":(0,a.handle_board_post)(n.local.get("userId"))}o(s)})}});