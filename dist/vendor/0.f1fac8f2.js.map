{"version":3,"sources":["webpack:///./src/modules/Popup/css/Popup.css","webpack:///./src/modules/Popup/Popup.js","webpack:///./src/modules/Popup/css/Popup.css?b815","webpack:///./util/Request.js"],"names":["Request","Option","head","host","article","recovery","Popup","props","componentDidMount","extensions_to_content","message","zoom","response","setState","defaultZoom","handle_upload","state","head_address","address","btn_loading","get_by_cookie","steam_roller","result","upload_to_server","body","JSON","stringify","open","description","duration","newArr","arr","item","Array","isArray","push","apply","handle_address","event","target","value","handle_head_address","handle_coopraid_search","coopraid_search_value","handle_coopraid_switch","checked","search","tasks","console","log","error","handle_zoom","render","selectBefore","width","marginLeft","float","color","marginRight","clear","margin","textAlign","btn_type","tooltip_text","Component","url","data","callback","params","method","headers","Object","assign","fetch","then","text","catch","credentials","json","messages","chrome","tabs","query","active","currentWindow","sendMessage","id"],"mappings":"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","file":"vendor/0.f1fac8f2.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".Popup {\\r\\n    width: 300px;\\r\\n    height: 400px;\\r\\n    text-align: center;\\r\\n    padding: 8px;\\r\\n    background: #B0E0E6;\\r\\n    font-size: 14px;\\r\\n}\\r\\n\\r\\n.Popup .white-space {\\r\\n    margin-top: 8px;\\r\\n}\", \"\"]);\n\n// exports\n","/*\r\n * @Author: zy9@github.com/zy410419243 \r\n * @Date: 2018-05-20 14:46:14 \r\n * @Last Modified by: zy9\r\n * @Last Modified time: 2018-06-28 17:31:57\r\n */\r\nimport React, { Component } from 'react'\r\n\r\nimport { Button, Input, Select, notification, Switch, Tooltip, Slider } from 'antd'\r\nconst Option = Select.Option;\r\n\r\nimport * as Request from '../../../util/Request'\r\n\r\nimport './css/Popup.css'\r\n\r\nconst head = 'http://';\r\nconst host = 'localhost:8023';\r\nconst article = 'http://game.granbluefantasy.jp/item/article_list_by_filter_mode'; // item第二页，红跟豆那页\r\nconst recovery = 'http://game.granbluefantasy.jp/item/recovery_and_evolution_list_by_filter_mode'; // item第一页，日常素材\r\n\r\nexport default class Popup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            btn_loading: false,\r\n            btn_type: 'primary',\r\n            address: host,\r\n            head_address: head,\r\n            tooltip_text: '',\r\n            coopraid_search_value: '',\r\n            defaultZoom: 1,\r\n        }\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        Request.extensions_to_content({ message: 'get_zoom' }, response => {\r\n            const { zoom } = response;\r\n\r\n            this.setState({ defaultZoom: zoom });\r\n        });\r\n    }\r\n\r\n    handle_upload = () => {\r\n        const { head_address, address } = this.state;\r\n\r\n        this.setState({ btn_loading: true });\r\n        \r\n        Request.get_by_cookie(article, {}, result => {\r\n            Request.get_by_cookie(recovery, {}, recovery => {\r\n                recovery = this.steam_roller(recovery);\r\n    \r\n                result = [...result, ...recovery];\r\n    \r\n                Request.upload_to_server(`${head_address}${address}/Memo/gbf/i_item.do`, { body: 'user_id=6964955&data=' + JSON.stringify(result) }, result => {\r\n                    if(result == 'success') {\r\n                        notification.open({\r\n                            message: '上传成功',\r\n                            description: '',\r\n                            duration: 3\r\n                        });\r\n                    }\r\n                    \r\n                    this.setState({ btn_loading: false });\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    // 数组扁平化\r\n    steam_roller = arr => {\r\n        let newArr = [];\r\n\r\n        for(let item of arr) {\r\n            Array.isArray(item) ? newArr.push.apply(newArr, this.steam_roller(item)) : newArr.push(item);\r\n        }\r\n\r\n        return newArr;\r\n    }\r\n\r\n    handle_address = event => this.setState({ address: event.target.value });\r\n\r\n    handle_head_address = head_address => this.setState({ head_address });\r\n\r\n    handle_coopraid_search = event => this.setState({ coopraid_search_value: event.target.value });\r\n\r\n    handle_coopraid_switch = checked => {\r\n        const { coopraid_search_value } = this.state;\r\n\r\n        checked && Request.extensions_to_content({ message: 'init_coopraid_listener', search: coopraid_search_value }, response => {\r\n            const { tasks } = response;\r\n    \r\n            switch(tasks.message) {\r\n                case 'success':\r\n    \r\n                break;\r\n    \r\n                case 'failed':\r\n                    notification.open({\r\n                        message: '开启失败',\r\n                        description: '',\r\n                        duration: 3\r\n                    });\r\n\r\n                    console.log(tasks.error);\r\n                break;\r\n    \r\n                default:\r\n    \r\n                break;\r\n            }\r\n        });\r\n    }\r\n\r\n    handle_zoom = zoom => {\r\n        Request.extensions_to_content({ message: 'set_zoom', zoom });\r\n    }\r\n\r\n    render = () => {\r\n        const { btn_loading, address, coopraid_search_value, defaultZoom } = this.state;\r\n\r\n        const selectBefore = (\r\n            <Select defaultValue='http://' style={{ width: 90 }} onChange={ this.handle_head_address }>\r\n                <Option value='http://'>http://</Option>\r\n                <Option value='https://'>https://</Option>\r\n                <Option value='ftp://'>ftp://</Option>\r\n            </Select>\r\n        );\r\n\r\n        return (\r\n            <div className='Popup'>\r\n                <Input addonBefore={ selectBefore } style={{ width: '90%' }} onChange={ this.handle_address } value={ address } />\r\n                <div className='white-space' />\r\n\r\n                <Button type='primary' loading={ btn_loading } onClick={ this.handle_upload } style={{ width: '90%' }}>上传素材</Button>\r\n                <div className='white-space' />\r\n\r\n                <Input style={{ width: '90%' }} onChange={ this.handle_coopraid_search } value={ coopraid_search_value } placeholder='这里填房间描述，也就是搜索项' />\r\n                <div className='white-space' />\r\n                \r\n                <div style={{ marginLeft: '6%' }}>\r\n                    <Tooltip title='看见上面的文本框了么，填了这个你才能开启搜索'>\r\n                        <span style={{ float: 'left', color: '#666' }}>是否开启共斗搜索</span>\r\n                        <Switch disabled={ !coopraid_search_value } onChange={ this.handle_coopraid_switch } style={{ float: 'right', marginRight: '6%' }} />\r\n                        <div style={{ clear: 'both' }} ></div>\r\n                    </Tooltip>\r\n                </div>\r\n                <div className='white-space' />\r\n                \r\n                <div style={{ margin: '0 6%', textAlign: 'left' }}>\r\n                    <span style={{ color: '#666' }}>调节窗口大小</span>\r\n                    <Slider step={ 0.01 } min={ 0.3 } max={ 1.5 } defaultValue={ defaultZoom } onChange={ this.handle_zoom } />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\nvar content = require(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!./Popup.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/_style-loader@0.21.0@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!./Popup.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!./Popup.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\r\n * @Author: zy9@github.com/zy410419243 \r\n * @Date: 2018-06-08 09:13:33 \r\n * @Last Modified by: zy9\r\n * @Last Modified time: 2018-06-26 13:42:01\r\n */\r\n// 上传数据到服务器\r\nexport const upload_to_server = (url, data, callback) => {\r\n    if(!url) return;\r\n\r\n    let params = {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n        },\r\n    }\r\n    params = Object.assign(params, data);\r\n\r\n    fetch(url, params).then(result => result.text()).then(result => callback(result))\r\n    .catch(error => {\r\n        // console.log(error)\r\n    });\r\n}\r\n\r\nexport const get_by_cookie = (url, data, callback) => {\r\n    if(!url) return;\r\n\r\n    let params = {\r\n        credentials: 'include', // 加入cookie\r\n    };\r\n    params = Object.assign(params, data);\r\n\r\n    fetch(url, params).then(result => result.json()).then(result => callback(result))\r\n    .catch(error => {\r\n        // console.log(error);\r\n    });\r\n}\r\n\r\n// 浏览器通信\r\nexport const extensions_to_content = (messages, callback) => {\r\n    chrome.tabs.query({ active: true, currentWindow: true }, tabs => {\r\n        chrome.tabs.sendMessage(tabs[0].id, messages, response => callback && callback(response));\r\n    });\r\n}"],"sourceRoot":""}