{"version":3,"sources":["webpack:///./src/modules/Popup/css/Popup.css","webpack:///./src/modules/Popup/Popup.js","webpack:///./src/modules/Popup/css/Popup.css?b815","webpack:///./util/Request.js"],"names":["Request","Option","chrome","extension","getBackgroundPage","STORE","store","article","recovery","Popup","props","coopraid_search_value","get","state","btn_loading","btn_type","address","head_address","defaultZoom","handle_search","Component","componentWillMount","handle_upload","setState","get_by_cookie","steam_roller","result","upload_to_server","body","JSON","stringify","open","message","description","duration","new_arr","arr","item","Array","isArray","push","apply","handle_address","event","target","value","handle_head_address","handle_coopraid_search","handle_coopraid_switch","checked","remove","tabs","query","active","currentWindow","port","connect","id","name","set","postMessage","search","handle_zoom","zoom","render","selectBefore","width","marginLeft","float","color","marginRight","clear","margin","textAlign","url","data","callback","params","method","headers","Object","assign","fetch","then","text","catch","credentials","json"],"mappings":"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","file":"vendor/0.8d51d518.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".Popup {\\r\\n    width: 300px;\\r\\n    height: 400px;\\r\\n    text-align: center;\\r\\n    padding: 8px;\\r\\n    background: #B0E0E6;\\r\\n    font-size: 14px;\\r\\n}\\r\\n\\r\\n.Popup .white-space {\\r\\n    margin-top: 8px;\\r\\n}\", \"\"]);\n\n// exports\n","/*\r\n * @Author: zy9@github.com/zy410419243 \r\n * @Date: 2018-05-20 14:46:14 \r\n * @Last Modified by: zy9\r\n * @Last Modified time: 2018-06-30 13:01:42\r\n */\r\nimport React, { Component } from 'react'\r\n\r\nimport { Button, Input, Select, notification, Switch, Tooltip, Slider } from 'antd'\r\nconst Option = Select.Option;\r\n\r\nimport * as Request from '../../../util/Request'\r\n\r\nconst { store: STORE } = chrome.extension.getBackgroundPage();\r\n\r\nimport './css/Popup.css'\r\n\r\nconst article = 'http://game.granbluefantasy.jp/item/article_list_by_filter_mode'; // item第二页，红跟豆那页\r\nconst recovery = 'http://game.granbluefantasy.jp/item/recovery_and_evolution_list_by_filter_mode'; // item第一页，日常素材\r\n\r\nexport default class Popup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const coopraid_search_value = STORE.get('search') || '';\r\n\r\n        this.state = {\r\n            btn_loading: false,\r\n            btn_type: 'primary',\r\n            address: 'localhost:8023',\r\n            head_address: 'http://',\r\n            coopraid_search_value,\r\n            defaultZoom: STORE.get('zoom'),\r\n        }\r\n\r\n        !!coopraid_search_value && this.handle_search();\r\n    }\r\n\r\n    componentWillMount = () => {\r\n\r\n    }\r\n\r\n    handle_upload = () => {\r\n        const { head_address, address } = this.state;\r\n\r\n        this.setState({ btn_loading: true });\r\n        \r\n        Request.get_by_cookie(article, {}, result => {\r\n            Request.get_by_cookie(recovery, {}, recovery => {\r\n                recovery = this.steam_roller(recovery);\r\n    \r\n                result = [...result, ...recovery];\r\n    \r\n                Request.upload_to_server(`${head_address}${address}/Memo/gbf/i_item.do`, { body: 'user_id=6964955&data=' + JSON.stringify(result) }, result => {\r\n                    if(result == 'success') {\r\n                        notification.open({\r\n                            message: '上传成功',\r\n                            description: '',\r\n                            duration: 3\r\n                        });\r\n                    }\r\n                    \r\n                    this.setState({ btn_loading: false });\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    // 数组扁平化\r\n    steam_roller = arr => {\r\n        let new_arr = [];\r\n\r\n        for(let item of arr) {\r\n            Array.isArray(item) ? new_arr.push.apply(new_arr, this.steam_roller(item)) : new_arr.push(item);\r\n        }\r\n\r\n        return new_arr;\r\n    }\r\n\r\n    handle_address = event => this.setState({ address: event.target.value });\r\n\r\n    handle_head_address = head_address => this.setState({ head_address });\r\n\r\n    handle_coopraid_search = event => this.setState({ coopraid_search_value: event.target.value });\r\n\r\n    handle_coopraid_switch = checked => {\r\n        checked && this.handle_search();\r\n\r\n        !checked && STORE.remove('search');\r\n    }\r\n\r\n    handle_search = () => {\r\n        const { coopraid_search_value } = this.state;\r\n        \r\n        chrome.tabs.query({ active: true, currentWindow: true }, tabs => {\r\n            const port = chrome.tabs.connect(tabs[0].id, { name: 'popup_to_content' });\r\n\r\n            STORE.set('search', coopraid_search_value);\r\n            \r\n            port.postMessage({ message: 'open_coopraid_search', search: coopraid_search_value });\r\n        });\r\n    }\r\n\r\n    handle_zoom = zoom => {\r\n        STORE.set('zoom', zoom);\r\n\r\n        chrome.tabs.query({ active: true, currentWindow: true }, tabs => {\r\n            const port = chrome.tabs.connect(tabs[0].id, { name: 'popup_to_content' });\r\n            \r\n            port.postMessage({ zoom, message: 'set_zoom' });\r\n        });\r\n    }\r\n\r\n    render = () => {\r\n        const { btn_loading, address, coopraid_search_value, defaultZoom } = this.state;\r\n\r\n        const selectBefore = (\r\n            <Select defaultValue='http://' style={{ width: 90 }} onChange={ this.handle_head_address }>\r\n                <Option value='http://'>http://</Option>\r\n                <Option value='https://'>https://</Option>\r\n                <Option value='ftp://'>ftp://</Option>\r\n            </Select>\r\n        );\r\n\r\n        return (\r\n            <div className='Popup'>\r\n                <Input addonBefore={ selectBefore } style={{ width: '90%' }} onChange={ this.handle_address } value={ address } />\r\n                <div className='white-space' />\r\n\r\n                <Button type='primary' loading={ btn_loading } onClick={ this.handle_upload } style={{ width: '90%' }}>上传素材</Button>\r\n                <div className='white-space' />\r\n\r\n                <Input style={{ width: '90%' }} onChange={ this.handle_coopraid_search } value={ coopraid_search_value } placeholder='这里填房间描述' />\r\n                <div className='white-space' />\r\n                \r\n                <div style={{ marginLeft: '6%' }}>\r\n                    <Tooltip title='看见上面的文本框了么，填了这个你才能开启搜索'>\r\n                        <span style={{ float: 'left', color: '#666' }}>是否开启共斗搜索</span>\r\n                        <Switch disabled={ !coopraid_search_value } onChange={ this.handle_coopraid_switch } checked={ !!coopraid_search_value } style={{ float: 'right', marginRight: '6%' }} />\r\n                        <div style={{ clear: 'both' }} ></div>\r\n                    </Tooltip>\r\n                </div>\r\n                <div className='white-space' />\r\n                \r\n                <div style={{ margin: '0 6%', textAlign: 'left' }}>\r\n                    <span style={{ color: '#666' }}>调节窗口大小</span>\r\n                    <Slider step={ 0.01 } min={ 0.3 } max={ 1.5 } defaultValue={ defaultZoom } onChange={ this.handle_zoom } />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\nvar content = require(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!./Popup.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/_style-loader@0.21.0@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!./Popup.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!./Popup.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\r\n * @Author: zy9@github.com/zy410419243 \r\n * @Date: 2018-06-08 09:13:33 \r\n * @Last Modified by: zy9\r\n * @Last Modified time: 2018-06-29 16:09:30\r\n */\r\n// 上传数据到服务器\r\nexport const upload_to_server = (url, data, callback) => {\r\n    if(!url) return;\r\n\r\n    let params = {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n        },\r\n    }\r\n    params = Object.assign(params, data);\r\n\r\n    fetch(url, params).then(result => result.text()).then(result => callback(result))\r\n    .catch(error => {\r\n        // console.log(error)\r\n    });\r\n}\r\n\r\nexport const get_by_cookie = (url, data, callback) => {\r\n    if(!url) return;\r\n\r\n    let params = {\r\n        credentials: 'include', // 加入cookie\r\n    };\r\n    params = Object.assign(params, data);\r\n\r\n    fetch(url, params).then(result => result.json()).then(result => callback(result))\r\n    .catch(error => {\r\n        // console.log(error);\r\n    });\r\n}"],"sourceRoot":""}