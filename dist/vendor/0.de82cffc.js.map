{"version":3,"sources":["webpack:///./src/modules/Popup/css/Popup.css","webpack:///./src/modules/Popup/Popup.js","webpack:///./src/modules/Popup/css/Popup.css?b815","webpack:///./util/Request.js"],"names":["Request","Option","STORE","window","store","article","recovery","Popup","props","defaultZoom","get","state","btn_loading","btn_type","address","head_address","tooltip_text","coopraid_search_value","Component","componentWillMount","handle_upload","setState","get_by_cookie","steam_roller","result","upload_to_server","body","JSON","stringify","open","message","description","duration","newArr","arr","item","Array","isArray","push","apply","handle_address","event","target","value","handle_head_address","handle_coopraid_search","handle_coopraid_switch","handle_zoom","set","zoom","chrome","tabs","query","active","currentWindow","port","connect","id","name","postMessage","render","selectBefore","width","marginLeft","float","color","marginRight","clear","margin","textAlign","url","data","callback","params","method","headers","Object","assign","fetch","then","text","catch","credentials","json","extension_to_content","messages","sendMessage","response"],"mappings":"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","file":"vendor/0.de82cffc.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".Popup {\\r\\n    width: 300px;\\r\\n    height: 400px;\\r\\n    text-align: center;\\r\\n    padding: 8px;\\r\\n    background: #B0E0E6;\\r\\n    font-size: 14px;\\r\\n}\\r\\n\\r\\n.Popup .white-space {\\r\\n    margin-top: 8px;\\r\\n}\", \"\"]);\n\n// exports\n","/*\r\n * @Author: zy9@github.com/zy410419243 \r\n * @Date: 2018-05-20 14:46:14 \r\n * @Last Modified by: zy9\r\n * @Last Modified time: 2018-06-29 15:56:14\r\n */\r\nimport React, { Component } from 'react'\r\n\r\nimport { Button, Input, Select, notification, Switch, Tooltip, Slider } from 'antd'\r\nconst Option = Select.Option;\r\n\r\nimport * as Request from '../../../util/Request'\r\n\r\nconst STORE = window.store;\r\n\r\nimport './css/Popup.css'\r\n\r\nconst article = 'http://game.granbluefantasy.jp/item/article_list_by_filter_mode'; // item第二页，红跟豆那页\r\nconst recovery = 'http://game.granbluefantasy.jp/item/recovery_and_evolution_list_by_filter_mode'; // item第一页，日常素材\r\n\r\nexport default class Popup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const defaultZoom = STORE.get('zoom');\r\n\r\n        this.state = {\r\n            btn_loading: false,\r\n            btn_type: 'primary',\r\n            address: 'localhost:8023',\r\n            head_address: 'http://',\r\n            tooltip_text: '',\r\n            coopraid_search_value: '',\r\n            defaultZoom,\r\n        }\r\n    }\r\n\r\n    componentWillMount = () => {\r\n\r\n    }\r\n\r\n    handle_upload = () => {\r\n        const { head_address, address } = this.state;\r\n\r\n        this.setState({ btn_loading: true });\r\n        \r\n        Request.get_by_cookie(article, {}, result => {\r\n            Request.get_by_cookie(recovery, {}, recovery => {\r\n                recovery = this.steam_roller(recovery);\r\n    \r\n                result = [...result, ...recovery];\r\n    \r\n                Request.upload_to_server(`${head_address}${address}/Memo/gbf/i_item.do`, { body: 'user_id=6964955&data=' + JSON.stringify(result) }, result => {\r\n                    if(result == 'success') {\r\n                        notification.open({\r\n                            message: '上传成功',\r\n                            description: '',\r\n                            duration: 3\r\n                        });\r\n                    }\r\n                    \r\n                    this.setState({ btn_loading: false });\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    // 数组扁平化\r\n    steam_roller = arr => {\r\n        let newArr = [];\r\n\r\n        for(let item of arr) {\r\n            Array.isArray(item) ? newArr.push.apply(newArr, this.steam_roller(item)) : newArr.push(item);\r\n        }\r\n\r\n        return newArr;\r\n    }\r\n\r\n    handle_address = event => this.setState({ address: event.target.value });\r\n\r\n    handle_head_address = head_address => this.setState({ head_address });\r\n\r\n    handle_coopraid_search = event => this.setState({ coopraid_search_value: event.target.value });\r\n\r\n    handle_coopraid_switch = checked => {\r\n        // const { coopraid_search_value } = this.state;\r\n\r\n        // checked && Request.extensions_to_content({ message: 'init_coopraid_listener', search: coopraid_search_value }, response => {\r\n        //     const { tasks } = response;\r\n    \r\n        //     switch(tasks.message) {\r\n        //         case 'success':\r\n    \r\n        //         break;\r\n    \r\n        //         case 'failed':\r\n        //             notification.open({\r\n        //                 message: '开启失败',\r\n        //                 description: '',\r\n        //                 duration: 3\r\n        //             });\r\n\r\n        //             console.log(tasks.error);\r\n        //         break;\r\n    \r\n        //         default:\r\n    \r\n        //         break;\r\n        //     }\r\n        // });\r\n    }\r\n\r\n    handle_zoom = zoom => {\r\n        STORE.set('zoom', zoom);\r\n\r\n        chrome.tabs.query({ active: true, currentWindow: true }, tabs => {\r\n            const port = chrome.tabs.connect(tabs[0].id, { name: 'zoom_connect' });\r\n            \r\n            port.postMessage({ zoom, message: 'set_zoom' });\r\n        });\r\n\r\n        chrome.tabs.query({ active: true, currentWindow: true }, tabs => {\r\n            const port = chrome.tabs.connect(tabs[0].id, { name: 'zoom_connect1' });\r\n            \r\n            port.postMessage({ zoom, message: 'test' });\r\n        });\r\n    }\r\n\r\n    render = () => {\r\n        const { btn_loading, address, coopraid_search_value, defaultZoom } = this.state;\r\n\r\n        const selectBefore = (\r\n            <Select defaultValue='http://' style={{ width: 90 }} onChange={ this.handle_head_address }>\r\n                <Option value='http://'>http://</Option>\r\n                <Option value='https://'>https://</Option>\r\n                <Option value='ftp://'>ftp://</Option>\r\n            </Select>\r\n        );\r\n\r\n        return (\r\n            <div className='Popup'>\r\n                <Input addonBefore={ selectBefore } style={{ width: '90%' }} onChange={ this.handle_address } value={ address } />\r\n                <div className='white-space' />\r\n\r\n                <Button type='primary' loading={ btn_loading } onClick={ this.handle_upload } style={{ width: '90%' }}>上传素材</Button>\r\n                <div className='white-space' />\r\n\r\n                <Input style={{ width: '90%' }} onChange={ this.handle_coopraid_search } value={ coopraid_search_value } placeholder='这里填房间描述' />\r\n                <div className='white-space' />\r\n                \r\n                <div style={{ marginLeft: '6%' }}>\r\n                    <Tooltip title='看见上面的文本框了么，填了这个你才能开启搜索'>\r\n                        <span style={{ float: 'left', color: '#666' }}>是否开启共斗搜索</span>\r\n                        <Switch disabled={ !coopraid_search_value } onChange={ this.handle_coopraid_switch } style={{ float: 'right', marginRight: '6%' }} />\r\n                        <div style={{ clear: 'both' }} ></div>\r\n                    </Tooltip>\r\n                </div>\r\n                <div className='white-space' />\r\n                \r\n                <div style={{ margin: '0 6%', textAlign: 'left' }}>\r\n                    <span style={{ color: '#666' }}>调节窗口大小</span>\r\n                    <Slider step={ 0.01 } min={ 0.3 } max={ 1.5 } defaultValue={ defaultZoom } onChange={ this.handle_zoom } />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","\nvar content = require(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!./Popup.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/_style-loader@0.21.0@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!./Popup.css\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/_css-loader@0.28.11@css-loader/index.js!./Popup.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/*\r\n * @Author: zy9@github.com/zy410419243 \r\n * @Date: 2018-06-08 09:13:33 \r\n * @Last Modified by: zy9\r\n * @Last Modified time: 2018-06-28 21:53:30\r\n */\r\n// 上传数据到服务器\r\nexport const upload_to_server = (url, data, callback) => {\r\n    if(!url) return;\r\n\r\n    let params = {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n        },\r\n    }\r\n    params = Object.assign(params, data);\r\n\r\n    fetch(url, params).then(result => result.text()).then(result => callback(result))\r\n    .catch(error => {\r\n        // console.log(error)\r\n    });\r\n}\r\n\r\nexport const get_by_cookie = (url, data, callback) => {\r\n    if(!url) return;\r\n\r\n    let params = {\r\n        credentials: 'include', // 加入cookie\r\n    };\r\n    params = Object.assign(params, data);\r\n\r\n    fetch(url, params).then(result => result.json()).then(result => callback(result))\r\n    .catch(error => {\r\n        // console.log(error);\r\n    });\r\n}\r\n\r\n// 浏览器通信\r\nexport const extension_to_content = (messages, callback) => {\r\n    chrome.tabs.query({ active: true, currentWindow: true }, tabs => {\r\n        chrome.tabs.sendMessage(tabs[0].id, messages, response => {\r\n            callback && callback(response)\r\n        });\r\n    });\r\n}"],"sourceRoot":""}